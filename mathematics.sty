% Font
% \usepackage{bookman}
\usepackage{palatino}
%\fontfamily{cmss}\selectfont
% \renewcommand{\familydefault}{\sfdefault}


% DNW: error without no-math; with no-math there's no font differentiation
% \usepackage[no-math]{fontspec} \setmainfont{Arial}

\usepackage{adjustbox}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{array}
\usepackage{bbm}
\usepackage{caption}
\usepackage{centernot}
\usepackage{color}
\usepackage{commath}
\usepackage{comment}
\usepackage{dsfont}  % mathds
\usepackage[shortlabels]{enumitem}
\usepackage{footnote}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage[colorlinks=true,urlcolor=blue]{hyperref}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
% \usepackage{mathabx}
\usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{mdframed}
%\usepackage[outputdir=.build]{minted} \setminted{fontsize=\footnotesize}
%\usepackage{MnSymbol} % \upmodels
\usepackage{parskip}
\usepackage{relsize} % \mathlarger
\usepackage{ulem} % sout
\usepackage{verbatim}
\usepackage{tikz}
\usetikzlibrary{graphs,graphdrawing}
\usegdlibrary{force}
\usegdlibrary{trees}
\usepackage{quiver}

\let\originalfootnote\footnote
\let\footnote\undefined
\newcommand{\footnote}[1]{\originalfootnote{\red{#1}}}


% \excludecomment{proof}

\newtheorem{theorem}{\\Theorem}
\newtheorem*{theorem*}{\\Theorem}

\newtheorem{lemma}[theorem]{\\Lemma} % share number sequence with theorem
\newtheorem*{lemma*}{\\Lemma}

\newtheorem{corollary}[theorem]{\\Corollary}
\newtheorem*{corollary*}{\\Corollary}

\newtheorem{definition}[theorem]{\\Definition}
\newtheorem*{definition*}{\\Definition}

\newtheorem{claim}[theorem]{\\Claim}
\newtheorem*{claim*}{\\Claim}

\newtheorem{problem}[theorem]{\\Problem}
\newtheorem*{problem*}{\\Problem}

\newtheorem{question}[theorem]{\\Question}
\newtheorem*{question*}{\\Question}

\theoremstyle{remark}
\newtheorem{remark}[theorem]{\\Remark}
\newtheorem*{remark*}{\\Remark}

\theoremstyle{remark}
\newtheorem{example}[theorem]{\\Example}
\newtheorem*{example*}{\\Example}

\theoremstyle{remark}
\newtheorem{notation}[theorem]{\\Notation}
\newtheorem*{notation*}{\\Notation}

\theoremstyle{remark}
\newtheorem{intuition}[theorem]{\\Intuition}
\newtheorem*{intuition*}{\\Intuition}

\newcommand{\defn}[1]{\blue{\bf #1}}
\newcommand{\todo}[1]{\red{TODO #1}}



% https://tex.stackexchange.com/questions/8089/changing-style-of-proof
% \let\oldproofname=\proofname
% \renewcommand{\proofname}{\rm\bf{\oldproofname}}

% \usepackage[left=2cm,top=2cm,right=2cm,bottom=2cm,head=2cm,foot=1cm]{geometry}

% \DeclareMathOperator{\sec}{\text{sec}}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator{\Bern}{\text{Bern}}
\DeclareMathOperator{\Norm}{\text{Norm}}
\DeclareMathOperator{\D}{\text{D}}
\DeclareMathOperator{\E}{\text{E}}
\DeclareMathOperator{\Var}{\text{Var}}
\DeclareMathOperator{\Cov}{\text{Cov}}
\DeclareMathOperator{\Jac}{\text{Jac}}
\DeclareMathOperator{\Lagr}{\mathcal{L}}
\DeclareMathOperator{\by}{\times}
\DeclareMathOperator{\cosech}{\text{cosech}}
\DeclareMathOperator{\cosec}{\text{cosec}}
\let\del\undefined\newcommand{\del}{\partial}
\DeclareMathOperator{\ddldmujmuj}{\frac{\partial^2 \l}{\partial \mu_j^2}}
\DeclareMathOperator{\ddldsigmajsigmaj}{\frac{\partial^2 \l}{\partial \sigma_j^2}}
\DeclareMathOperator{\ddt}{\frac{\text{d}}{\text{dt}}}
\DeclareMathOperator{\ddu}{\frac{\text{d}}{\text{du}}}
\DeclareMathOperator{\diag}{\text{diag}}
\DeclareMathOperator{\dldmuj}{\frac{\partial \l}{\partial \mu_j}}
\DeclareMathOperator{\dldmu}{\frac{\partial \l}{\partial \mu}}
\DeclareMathOperator{\dldsigmaj}{\frac{\partial \l}{\partial \sigma_j}}
\DeclareMathOperator{\pdo}{\text{do}}
\DeclareMathOperator{\ealign}{\end{align*}}
\DeclareMathOperator{\hess}{\nabla^2}
\DeclareMathOperator{\p}{\text{p}}
\let\L\relax\DeclareMathOperator{\L}{\mathcal{L}}
\let\l\relax\DeclareMathOperator{\l}{\ell}
\let\d\relax\DeclareMathOperator{\d}{\dif}
\let\D\relax\DeclareMathOperator{\D}{\text{D}}
\let\Im\relax\DeclareMathOperator{\Im}{\mathrm{Im}}
\DeclareMathOperator{\Ker}{\mathrm{Ker}}
\DeclareMathOperator{\Dom}{\mathrm{Dom}}
\DeclareMathOperator{\Cod}{\mathrm{Cod}}
\DeclareMathOperator{\Span}{\mathrm{Span}}
\DeclareMathOperator{\ColSp}{\mathrm{ColSpace}}
\DeclareMathOperator{\NullSp}{\mathrm{NullSpace}}
\DeclareMathOperator{\RowSp}{\mathrm{RowSpace}}
\DeclareMathOperator{\ColRank}{\mathrm{ColRank}}
\DeclareMathOperator{\RowRank}{\mathrm{RowRank}}
\DeclareMathOperator{\Rank}{\mathrm{Rank}}
\DeclareMathOperator{\limplies}{\rightarrow}
\DeclareMathOperator{\lequiv}{\leftrightarrow}
\DeclareMathOperator{\interior}{\text{int}}
\DeclareMathOperator{\sech}{sech}
\newcommand{\mat}{\mathbf}
\newcommand{\0}{\vec 0}
\newcommand{\1}{{-1}}
\newcommand{\Arg}{\text{Arg}~}
\newcommand{\A}{\vec A}
\newcommand{\B}{\vec B}
\newcommand{\CP}{\textbf{CP}}
\newcommand{\Cx}{\C^\times}
\newcommand{\C}{\mathbb{C}}
\newcommand{\GLC}[1]{\mathrm{GL}_{#1}(\C)}
\newcommand{\GLR}[1]{\mathrm{GL}_{#1}(\R)}
\newcommand{\GL}{\mathrm{GL}}
\newcommand{\I}{\vec I}
\newcommand{\Log}{\text{Log}~}
\newcommand{\N}{\mathbb{N}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Rx}{\R^\times}
\newcommand{\R}{\mathbb{R}}
\newcommand{\T}{\mathbf{T}}
\newcommand{\V}{\vec V}
\newcommand{\W}{\vec W}
\newcommand{\X}{\vec X}
\newcommand{\Y}{\vec Y}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\balign}{\begin{align*}}
\newcommand{\ceil}[1]{\lceil#1\rceil}
\newcommand{\Bigceil}[1]{\Big\lceil#1\Big\rceil}
\newcommand{\constant}{\text{constant}}
% TODO use prefix letter \in {b, p} deprecate c as prefix
\newcommand{\cvecccc}[4]{\begin{bmatrix}#1\\#2\\#3\\#4\end{bmatrix}}
\newcommand{\cveccc}[3]{\begin{bmatrix}#1\\#2\\#3\end{bmatrix}}
\newcommand{\cvecc}[2]{\begin{bmatrix}#1\\#2\end{bmatrix}}
\newcommand{\bvecccc}[4]{\begin{bmatrix}#1\\#2\\#3\\#4\end{bmatrix}}
\newcommand{\bveccc}[3]{\begin{bmatrix}#1\\#2\\#3\end{bmatrix}}
\newcommand{\bvecc}[2]{\begin{bmatrix}#1\\#2\end{bmatrix}}
\newcommand{\pvecc}[2]{\begin{pmatrix}#1\\#2\end{pmatrix}}
\newcommand{\indep}{\mathlarger{\mathlarger{\upmodels}}}

\let\origlim\lim
\renewcommand{\lim}{\origlim\limits}
\let\originf\inf
\renewcommand{\inf}{\originf\limits}
\let\origliminf\liminf
\renewcommand{\liminf}{\origliminf\limits}
\let\origsup\sup
\renewcommand{\sup}{\origsup\limits}
\let\origlimsup\limsup
\renewcommand{\limsup}{\origlimsup\limits}

\newcommand{\cvec}[2]{\begin{bmatrix}#1\\#2\end{bmatrix}}  % TODO: delete

\renewcommand{\deg}{^\circ}

\newcommand{\F}{\vec{F}}
\renewcommand{\a}{\vec{a}}
\renewcommand{\r}{\vec{r}}

\newcommand{\dA}{\dif A}
\newcommand{\dG}{\dif G}
\newcommand{\dL}{\dif L}
\newcommand{\df}{\dif f}
\newcommand{\dg}{\dif g}
\newcommand{\dl}{\dif l}
\newcommand{\dm}{\dif m}
\newcommand{\dr}{\dif r}
\newcommand{\ds}{\dif s}
\newcommand{\dtheta}{\dif \theta}
\newcommand{\dt}{\dif t}
\newcommand{\dT}{\dif T}
\newcommand{\du}{\dif u}
\newcommand{\dmu}{\dif \mu}
\newcommand{\dx}{\dif x}
\newcommand{\dy}{\dif y}
\newcommand{\dz}{\dif z}

\newcommand{\dds}{\frac{\dif}{\dif s}}
\newcommand{\ddtheta}{\frac{\d}{\dtheta}}
\newcommand{\ddx}{\frac{\dif}{\dif x}}
\newcommand{\ddy}{\frac{\dif}{\dif y}}
\newcommand{\ddlambda}{\frac{\dif}{\dif \lambda}}

\newcommand{\dfdu}{\frac{\df}{\du}}
\newcommand{\dfdg}{\frac{\df}{\dg}}
\newcommand{\dgdu}{\frac{\dg}{\du}}
\newcommand{\dudt}{\frac{\du}{\dt}}
\newcommand{\dudx}{\frac{\du}{\dx}}
\newcommand{\dvdt}{\frac{\dif v}{\dif t}}
\newcommand{\dvdx}{\frac{\dif v}{\dif x}}
\newcommand{\dxdtheta}{\frac{\dx}{\dtheta}}
\newcommand{\dxdt}{\frac{\dx}{\dt}}
\newcommand{\dxdu}{\frac{\dif x}{\dif u}}
\newcommand{\dxdy}{\frac{\dx}{\dy}}
\newcommand{\dydtheta}{\frac{\dy}{\dtheta}}
\newcommand{\dydt}{\frac{\dy}{\dt}}
\newcommand{\dydx}{\frac{\dy}{\dx}}

\newcommand{\pddx}{\frac{\partial}{\partial x}}
\newcommand{\pddy}{\frac{\partial}{\partial y}}

\newcommand{\dHdt}{\frac{\d H}{\d t}}
\newcommand{\pdHdp}{\frac{\partial H}{\partial p}}
\newcommand{\pdHdq}{\frac{\partial H}{\partial q}}
\newcommand{\pdHdpi}{\frac{\partial H}{\partial p_i}}
\newcommand{\pdHdqi}{\frac{\partial H}{\partial q_i}}
\newcommand{\pdHdx}{\frac{\partial H}{\partial x}}

\newcommand{\pdFdp}{\frac{\partial F}{\partial p}}
\newcommand{\pdFdq}{\frac{\partial F}{\partial q}}
\newcommand{\pdFdpi}{\frac{\partial F}{\partial p_i}}
\newcommand{\pdFdqi}{\frac{\partial F}{\partial q_i}}

\newcommand{\pdLdxd}{\frac{\partial \Lag}{\partial \dot{x}}}
\newcommand{\pdLdx}{\frac{\partial \Lag}{\partial x}}

\newcommand{\pdLdyp}{\frac{\partial \Lag}{\partial y'}}
\newcommand{\pdLdy}{\frac{\partial \Lag}{\partial y}}

\newcommand{\pdLdxdi}{\frac{\partial \Lag}{\partial \dot{x}_i}}
\newcommand{\pdLdxi}{\frac{\partial \Lag}{\partial x_i}}

\newcommand{\pdLdqdi}{\frac{\partial \Lag}{\partial \dot{q}_i}}
\newcommand{\pdLdqi}{\frac{\partial \Lag}{\partial q_i}}

\newcommand{\dLdt}{\frac{\d \Lag}{\d t}}
\newcommand{\pdLdt}{\frac{\partial \Lag}{\partial t}}

\newcommand{\pdLdxdOne}{\frac{\partial \Lag}{\partial \dot{x}_1}}
\newcommand{\pdLdxOne}{\frac{\partial \Lag}{\partial x_1}}

\newcommand{\pdLdqdOne}{\frac{\partial \Lag}{\partial \dot{q}_1}}
\newcommand{\pdLdqOne}{\frac{\partial \Lag}{\partial q_1}}
\newcommand{\pdLdqdTwo}{\frac{\partial \Lag}{\partial \dot{q}_1}}
\newcommand{\pdLdqTwo}{\frac{\partial \Lag}{\partial q_1}}

\newcommand{\pdLdxdN}{\frac{\partial \Lag}{\partial \dot{x}_N}}
\newcommand{\pdLdxN}{\frac{\partial \Lag}{\partial x_N}}

\newcommand{\pdfdxd}{\frac{\partial f}{\partial \dot{x}}}
\newcommand{\pdfdxp}{\frac{\partial f}{\partial x'}}
\newcommand{\pdfdx}{\frac{\partial f}{\partial x}}
\newcommand{\pdfdyd}{\frac{\partial f}{\partial \dot{y}}}
\newcommand{\pdfdyp}{\frac{\partial f}{\partial y'}}
\newcommand{\pdfdy}{\frac{\partial f}{\partial y}}
\newcommand{\pdfdz}{\frac{\partial f}{\partial z}}

\newcommand{\pdgdxp}{\frac{\partial g}{\partial x'}}
\newcommand{\pdgdx}{\frac{\partial g}{\partial x}}
\newcommand{\pdgdyp}{\frac{\partial g}{\partial y'}}
\newcommand{\pdgdy}{\frac{\partial g}{\partial y}}
\newcommand{\pdhdy}{\frac{\partial h}{\partial y}}
\newcommand{\pdhdyp}{\frac{\partial h}{\partial y'}}

\newcommand{\dv}[2]{\frac{\dif #1}{\dif #2}}
\newcommand{\pdv}[2]{\frac{\partial #1}{\partial #2}}

\newcommand{\exercise}[2]{\item[#1]\textbf{#2}}
\newcommand{\f}{\vec f}
\newcommand{\floor}[1]{\lfloor#1\rfloor}
\newcommand{\hessian}{\mathbf{H}}
\newcommand{\inner}[2]{\langle #1, #2 \rangle}
\let\<\undefined\newcommand{\<}{\langle}
\let\>\undefined\newcommand{\>}{\rangle}
\newcommand{\Intuition}[1]{}
\newcommand{\ind}{\mathds{1}}
\newcommand{\hlinee}{\\\rule{400pt}{0.1pt}\\}
\newcommand{\limk}{\lim_{k \to \infty}}
\newcommand{\limn}{\lim_{n \to \infty}}
\newcommand{\liminfn}{\liminf_{n \to \infty}}
\newcommand{\limsupn}{\limsup_{n \to \infty}}
\newcommand{\limxa}{\lim_{x \to a}}
\newcommand{\mih}[1]{\mintinline{haskell}{#1}}

\newcommand{\bvecMM}[2]{\begin{bmatrix}#1\\#2\end{bmatrix}}
\newcommand{\bvecMMM}[3]{\begin{bmatrix}#1\\#2\\#3\end{bmatrix}}
\newcommand{\bmatMMxNN}[4]{\begin{bmatrix}#1 & #2\\#3 & #4\\ \end{bmatrix}}
\newcommand{\bmatt}{\bmatMMxNN}

\newcommand{\vecMM}[2]{\begin{bmatrix}#1\\#2\end{bmatrix}}
\newcommand{\vecMMM}[3]{\begin{bmatrix}#1\\#2\\#3\end{bmatrix}}
\newcommand{\matMMxNN}[4]{\begin{bmatrix}#1 & #2\\#3 & #4\\ \end{bmatrix}}
\newcommand{\matMMMxNN}[6]{\begin{bmatrix}#1 & #2\\#3 & #4\\#5 & #6\\ \end{bmatrix}}
\newcommand{\matMMMxNNN}[9]{\begin{bmatrix}#1 & #2 & #3\\#4 & #5 & #6\\#7 & #8 & #9\\ \end{bmatrix}}

\newcommand{\vmatMMxNN}[4]{\begin{vmatrix}#1 & #2\\#3 & #4\\ \end{vmatrix}}
\newcommand{\vmatMMMxNNN}[9]{\begin{vmatrix}#1 & #2 & #3\\#4 & #5 & #6\\#7 & #8 & #9\\ \end{vmatrix}}

% Not allowed more than 9 arguments
% \newcommand{\matMMMMxNNNN}[16]{
% \begin{pmatrix}
% #1  & #2  & #3  & #4\\
% #5  & #6  & #7  & #8\\
% #9  & #10 & #11 & #12\\
% #13 & #14 & #15 & #16
% \end{pmatrix}}
\newcommand{\mattxtttt}[8]{\begin{bmatrix}#1 & #2 \\ #3 & #4 \\ #5 & #6\\ #7 & #8\\ \end{bmatrix}}
\newcommand{\matt}{\matMMMxNNN}
\newcommand{\ninfty}{n \rightarrow \infty}
\newcommand{\eps}{\epsilon}
\newcommand{\emp}{\emptyset}
\newcommand{\om}{\omega}
\newcommand{\Om}{\Omega}
\newcommand{\otherwise}{\text{otherwise}}
\newcommand{\partialdd}[2]{\frac{\partial^2 #1}{\partial {#2}^2}}
\newcommand{\partiald}[2]{\frac{\partial #1}{\partial #2}}
\let\powerset\undefined\newcommand{\powerset}{\mathscr{P}}
\newcommand{\scvec}[2]{\tiny{\cvec{#1}{#2}}}
\newcommand{\smatt}[9]{\tiny{\matt{#1}{#2}{#3}{#4}{#5}{#6}{#7}{#8}{#9}}}
\newcommand{\smat}[4]{\tiny{\matMMxNN{#1}{#2}{#3}{#4}}}


\newcommand{\cupninf}{\bigcup_{n=1}^{\infty}}
\newcommand{\limninf}{\lim_{n \to \infty}}
\newcommand{\sumninf}{\sum_{n=1}^{\infty}}

% TODO: replace these
\newcommand{\sumn}{\sum_{n=1}^{\infty}}
\newcommand{\bigcupn}{\bigcup_{n=1}^{\infty}}
\newcommand{\sumim}{\sum_{i=1}^{m}}
\newcommand{\sumin}{\sum_{i=1}^{n}}

\newcommand{\s}{\vec s}
\newcommand{\textbfit}[1]{\textbf{\textit{#1}}}
\renewcommand{\u}{\vec u}
\renewcommand{\v}{\vec v}
\newcommand{\w}{\vec w}
\newcommand{\x}{\vec x}
\newcommand{\xhat}{\vec{\hat{x}}}
\newcommand{\yhat}{\vec{\hat{y}}}
\newcommand{\zhat}{\vec{\hat{z}}}
\newcommand{\rhat}{\vec{\hat{r}}}

\newcommand{\xdot}{\dot{x}}
\newcommand{\qdot}{\dot{q}}
\newcommand{\ydot}{\dot{y}}
\newcommand{\xddot}{\ddot{x}}
\newcommand{\yddot}{\ddot{y}}

\newcommand{\phihat}{\vec{\hat{\phi}}}
\newcommand{\y}{\vec y}
\newcommand{\z}{\vec z}
\renewcommand{\(}{\left(}
\renewcommand{\)}{\right)}
\renewcommand{\Re}{~\text{Re}~}
\renewcommand{\S}{\vec S}
\renewcommand{\vec}{\mathbf}
\renewcommand{\v}{\vec v}
\renewcommand{\bar}{\overline}
\newcommand{\nth}{n^{\text{th}}}
\newcommand{\blue}[1]{\textcolor{blue}{#1}}
\newcommand{\red}[1]{\textcolor{red}{#1}}
\newcommand{\green}[1]{\textcolor{green}{#1}}
\newcommand{\End}{~\text{End}~}
\newcommand{\Unif}{\text{Uniform}}
\newcommand{\Sym}{\text{Sym}}
\newcommand{\nimplies}{\centernot\implies}
\newcommand{\subspace}{<}
\newcommand{\subspaceeq}{\leq}
\newcommand{\ubar}[1]{\text{\b{$#1$}}}
\newcommand{\correct}{\red{\checkmark}}
\newcommand{\grad}{\nabla}

% https://tex.stackexchange.com/questions/2233/whats-the-best-way-make-an-augmented-coefficient-matrix$
\newenvironment{amatrix}[1]{%
  \left(\begin{array}{@{}*{#1}{c}|c@{}}
}{%
  \end{array}\right)
}

\newcommand{\mc}{\mathcal}
\newcommand{\ms}{\mathscr}
\newcommand{\Lag}{\mathcal{L}}


\newcommand{\larrow}{\leftarrow}
\newcommand{\rarrow}{\rightarrow}
\newcommand{\seq}{\subseteq}
% \newcommand{\norm}[1]{\|#1\|}

\DeclareMathOperator{\diam}{\mathrm{diam}}

\newcommand{\orb}{\text{Orb}}
\let\ae\undefined\newcommand{\ae}{\text{~~a.e.}}

\newcommand{\lcm}{\text{lcm}}
\newcommand{\cts}{\text{cts}}

\newcommand{\union}{\cup}
\newcommand{\disjunion}{\sqcup}
\newcommand{\pushout}{\sqcup}